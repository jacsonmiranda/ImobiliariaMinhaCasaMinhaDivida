import { Component, Input, Output, EventEmitter } from '@angular/core';
import { PropertyService } from '../services/propertyservice.service';
import { Router } from '@angular/router';
import { Property } from '../app/Property';

@Component({
  selector: 'app-propertydetail',
  templateUrl: './propertydetail.component.html'
})
export class PropertydetailComponent {

  // Input variable to display properties of an property
  @Input() property: Property;

  @Output() refreshPropertyList: EventEmitter<boolean> = new EventEmitter<boolean>();

  // Service injected in constructor
  constructor(private PropertyService: PropertyService, private router: Router) {
  }

  // Method to edit property details
  editProperty(){
    this.router.navigate(["EditProperty/"+ this.property.id]);
  }

  // Method to delete an property
  deleteProperty(propertyToBeDeleted: Property){
    var result = confirm("Are you sure, you want to delete this Property?");
    if (result) {
      this.propertyService.deleteProperty(this.property.id);
      this.refreshPropertyList.emit(true);
      this.router.navigate(["Property"]);
    }
  }
}
